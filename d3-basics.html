<!DOCTYPE html>
<html>

<head>
    <title>Demo D3 -basics</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="js/d3.js"></script>
</head>

<body>
    <div style="float:left">
        <h3>svg bar</h3>
        <svg>
            <rect width="100" height="200" style="fill:blue;">
        </svg>
    </div>
    <h3>D3 Bar</h3>
    <script>
    d3.select("body") //select body element
        .append("svg") //add svg element
        .append("rect") //add rect svg element
        .attr("width", 100) //set attribute
        .attr("height", 200)
        .style("fill", "blue"); //change styling
    </script>
    <!-- <h3>svg circle</h3>
    <svg width="50" height="50">
        <circle cx="25" cy="25" r="25" style="fill:blue" />
    </svg>
    <h3>d3 circle</h3> -->
    <script>

    	// d3.select("body")
	    // 	.append("svg")
	    // 	.attr("width",50)
	    // 	.attr("height",50)
	    // 		.append("circle")
		   //  		.attr("cx",25)
		   //  		.attr("cy",25)
		   //  		.attr("r",25)
	    // 		.style("fill","grey");
	    var w = 500;
	    var h=300;
	    var dataset=[5,10,13,20,25,12,35,9,23];
	    var padding=2;
	    var svg=d3.select('body')
	    .append('svg')
	    .attr('width', w)
	    .attr('height', h);

	   svg.selectAll('svg')
	   selecting all svg element
	   .data(dataset)//the data in the svg will be from dataset
	   .enter()//enter the data if not created
	   		.append('rect')//create a rectangle for each data entry
	       .attr('x', function(d,i){//adjusting x attribute
	       	return i*(w/dataset.length);
	       	 //i refers to the index e.g. 1,2,3...
	       	 // d refers to the dataset
	       })
	       .attr('y',function(d){
	       	return h-(d*4);
	       })
	       // if u want manipulated height then pass it to the function where it takes two arguments i.e. 'd' and 'i'
	       // d-> dataset i-> index
	       .attr('width', w/dataset.length-padding)
	       .attr('height',function(d){
	       	return d*4;
	       })
	   //     .style('fill', 'blue');
	       // -------------------------new 
	       function colorPicker(data){
	       	if(data<30){
	       		return "#333";
	       	}
	       	if(data>30){
	       		return "red"
	       	}
	       }
	       svg.selectAll("svg")
	       .data(dataset)
	       .enter()
	       .append("rect")
	       .attr({
	       	x:function(d,i){return i*( w / dataset.length );},
	       	y:function(d){return h-(d*4)},
	        width:(w/dataset.length)-padding,
	        height:function(d){return d*4},
	        //fill:function(d){return "rgb("+d*4+",0,0)";}
	        fill:function(d){return colorPicker(d);}
	       	});
	       svg.selectAll('text')
	       .data(dataset)
	       .enter()
	       .append("text")
	       .text(function(d){return d;})
	       .attr({
	       	x:function(d,i){return i*( w / dataset.length )+(w/dataset.length)/2;},
	       	y:function(d){return h-(d*4)},
	       	"color":"#fff"
	       })
    </script>
</body>

</html>
